fullnameOverride: nextcloud

ingress:
  enabled: true
  className: traefik
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
  tls:
    - secretName: labz-apps-tls
      hosts:
        - nextcloud.labz.example.com

nextcloud:
  host: nextcloud.labz.example.com
  username: ncadmin
  password: changeme
  datadir: /var/www/html/data
  update: 0

persistence:
  enabled: true
  existingClaim: nextcloud-data
  storageClass: ""
  accessMode: ReadWriteOnce
  size: 1Ti

externalDatabase:
  enabled: true
  type: postgresql
  host: postgresql.data.svc.cluster.local
  port: 5432
  user: nextcloud
  password: changeme
  database: nextcloud
  existingSecret:
    enabled: false
    usernameKey: db-username
    passwordKey: db-password

externalRedis:
  enabled: true
  host: redis-master.data.svc.cluster.local
  port: "6379"
  password: changeme
  existingSecret:
    enabled: false
    passwordKey: redis-password

mariadb:
  enabled: false

postgresql:
  enabled: false

redis:
  enabled: false

resources:
  requests:
    cpu: 500m
    memory: 1Gi
  limits:
    cpu: 2000m
    memory: 4Gi

phpConfigs:
  uploads.ini: |-
    upload_max_filesize = 10G
    post_max_size = 10G

podSecurityContext:
  enabled: true
  fsGroup: 33

containerSecurityContext:
  enabled: true
  runAsUser: 33
  runAsGroup: 33
  runAsNonRoot: true
