
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Uranus homelab GitOps reference implementation">
      
      
      
        <link rel="canonical" href="https://devadalberto.github.io/homelab_gitops/reference/">
      
      
        <link rel="prev" href="../troubleshooting/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Reference - Homelab GitOps</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Fira Code"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Homelab GitOps" class="md-header__button md-logo" aria-label="Homelab GitOps" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Homelab GitOps
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Reference
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="cyan"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="cyan"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/devadalberto/homelab_gitops" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    devadalberto/homelab_gitops
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Homelab GitOps" class="md-nav__button md-logo" aria-label="Homelab GitOps" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Homelab GitOps
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/devadalberto/homelab_gitops" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    devadalberto/homelab_gitops
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Workflow
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#platform-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Platform Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Platform Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#network-edge" class="md-nav__link">
    <span class="md-ellipsis">
      Network &amp; Edge
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster-runtime" class="md-nav__link">
    <span class="md-ellipsis">
      Cluster Runtime
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateful-services" class="md-nav__link">
    <span class="md-ellipsis">
      Stateful Services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-facing-applications" class="md-nav__link">
    <span class="md-ellipsis">
      User-Facing Applications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#secrets-and-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      Secrets and Credentials
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Secrets and Credentials">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manage-encrypted-application-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Manage Encrypted Application Secrets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Manage Encrypted Application Secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rotate-awx-admin-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      Rotate AWX Admin Credentials
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rotate-postgres-superuser-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      Rotate Postgres Superuser Credentials
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rotate-pi-hole-admin-password" class="md-nav__link">
    <span class="md-ellipsis">
      Rotate Pi-hole Admin Password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#homepage-api-keys" class="md-nav__link">
    <span class="md-ellipsis">
      Homepage API Keys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manage-nextcloud-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      Manage Nextcloud Credentials
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana-admin-credential-management" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana Admin Credential Management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Grafana Admin Credential Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieve-the-password" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieve the Password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rotate-the-password" class="md-nav__link">
    <span class="md-ellipsis">
      Rotate the Password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-this-matters" class="md-nav__link">
    <span class="md-ellipsis">
      Why This Matters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#internal-ca" class="md-nav__link">
    <span class="md-ellipsis">
      Internal CA
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pfsense-and-networking" class="md-nav__link">
    <span class="md-ellipsis">
      pfSense and Networking
    </span>
  </a>
  
    <nav class="md-nav" aria-label="pfSense and Networking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#refreshing-pfsense-bootstrap-media" class="md-nav__link">
    <span class="md-ellipsis">
      Refreshing pfSense Bootstrap Media
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-nat-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling NAT Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-reference" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Reference
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#environment-variables-and-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Environment Variables and Mapping
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment Variables and Mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jellyfin-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Jellyfin configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#traefik-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      Traefik Dashboard
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup-disaster-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      Backup &amp; Disaster Recovery
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extending-the-platform" class="md-nav__link">
    <span class="md-ellipsis">
      Extending the Platform
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changelog" class="md-nav__link">
    <span class="md-ellipsis">
      Changelog
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Changelog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2025-09-20t000000000000z" class="md-nav__link">
    <span class="md-ellipsis">
      2025-09-20T00:00:00.000000Z
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2025-09-19t000000000000z" class="md-nav__link">
    <span class="md-ellipsis">
      2025-09-19T00:00:00.000000Z
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2025-09-18t000000000000z" class="md-nav__link">
    <span class="md-ellipsis">
      2025-09-18T00:00:00.000000Z
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2025-09-17t080000000000z" class="md-nav__link">
    <span class="md-ellipsis">
      2025-09-17T08:00:00.000000Z
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2025-09-10t044738065634z" class="md-nav__link">
    <span class="md-ellipsis">
      2025-09-10T04:47:38.065634Z
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/devadalberto/homelab_gitops/edit/main/docs/reference.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="reference">Reference<a class="headerlink" href="#reference" title="Permanent link">&para;</a></h1>
<p>This guide aggregates the architecture, operational procedures, and historical notes for the Uranus homelab GitOps stack. Pair it with the <a href="../workflow/">Workflow</a> overview for reconciliation details and automation entry points.</p>
<h2 id="platform-overview">Platform Overview<a class="headerlink" href="#platform-overview" title="Permanent link">&para;</a></h2>
<p>The environment stitches together on-premises virtualization, Kubernetes tooling, and GitOps pipelines so that every environment can be reproduced deterministically. The following diagram highlights the primary subsystems and the traffic flow between them.</p>
<p><img alt="Homelab component overview" src="../diagrams/homelab-overview.svg" /></p>
<h3 id="network-edge">Network &amp; Edge<a class="headerlink" href="#network-edge" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>pfSense CE</strong> supplies DHCP, DNS, and outbound NAT for the homelab VLAN. Firewall port-forward examples remain disabled by default so operators can opt in to each exposure after validating policies.</li>
<li><strong>MetalLB</strong> advertises LoadBalancer services within the <code>10.10.0.0/24</code> range published by pfSense. The values are templated via environment variables inside <code>.env</code> to keep addresses portable between labs.</li>
<li><strong>Traefik</strong> terminates TLS using certificates issued by the internal cert-manager hierarchy and provides a default ingress class for workloads.</li>
</ul>
<h3 id="cluster-runtime">Cluster Runtime<a class="headerlink" href="#cluster-runtime" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Minikube</strong> forms the base Kubernetes control plane. Bootstrap scripts configure container runtimes, storage classes, and hostPath directories aligned with the repository layout.</li>
<li><strong>Flux</strong> reconciles Helm releases and Kubernetes manifests stored in this Git repository, ensuring the cluster continuously converges towards the desired state.</li>
<li><strong>Cert-Manager</strong> provisions a root Certificate Authority and application leaf certs. The root CA export procedure lives in <a href="#internal-ca">Internal CA</a>.</li>
</ul>
<h3 id="stateful-services">Stateful Services<a class="headerlink" href="#stateful-services" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>PostgreSQL (Bitnami chart)</strong> runs in the <code>data</code> namespace. A nightly CronJob pushes WAL backups to the hostPath defined by <code>LABZ_MOUNT_BACKUPS</code>.</li>
<li><strong>Persistent hostPath volumes</strong> for application storage are parameterized through <code>.env</code> to align with local disk layout.</li>
</ul>
<h3 id="user-facing-applications">User-Facing Applications<a class="headerlink" href="#user-facing-applications" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>AWX</strong> provides Ansible automation inside the <code>awx</code> namespace with persistent volumes and TLS termination handled by Traefik.</li>
<li><strong>Homepage</strong> publishes the default landing page for the homelab at <code>https://home.lab-minikube.labz.home.arpa/</code>, loading its layout from <code>k8s/apps/homepage/configmap.yaml</code> and pulling widget credentials (<code>openweathermap_api_key</code>, <code>uptime_kuma_api_key</code>) from the SOPS-encrypted secret at <code>apps/homepage/sops-secrets/homepage-secrets.yaml</code>.</li>
<li><strong>Django Multiproject Demo</strong> showcases the platform deployment pipeline, including container image preloading via <code>apps/django-multiproject/load-image.sh</code>.</li>
<li><strong>Observability stack</strong> is powered by <code>kube-prometheus-stack</code>, exposing Grafana, Prometheus, and Alertmanager through Traefik-managed Ingresses.</li>
</ul>
<h2 id="secrets-and-credentials">Secrets and Credentials<a class="headerlink" href="#secrets-and-credentials" title="Permanent link">&para;</a></h2>
<ul>
<li>SOPS/AGE secret placeholders live in the repo (<code>.sops/</code>). Actual encrypted files should be stored separately and decrypted only on trusted hosts.</li>
<li>Export <code>SOPS_AGE_KEY_FILE</code> (for example, <code>export SOPS_AGE_KEY_FILE="$PWD/.sops/age.key"</code>) before invoking <code>sops</code> locally or running Flux bootstrap scripts so the controllers mount the same private key during reconciliation.</li>
<li>Traefik ingress routes always reference TLS secrets; the repo defaults to the internal CA but can be swapped for ACME with external DNS integration.</li>
</ul>
<h3 id="manage-encrypted-application-secrets">Manage Encrypted Application Secrets<a class="headerlink" href="#manage-encrypted-application-secrets" title="Permanent link">&para;</a></h3>
<p>The AWX admin, Postgres superuser, and Pi-hole admin Kubernetes Secrets live in this repository as <a href="https://github.com/getsops/sops">SOPS</a> manifests and are encrypted for the Age recipient defined in <code>.sops/.sops.yaml</code>. To edit any of these secrets:</p>
<ol>
<li>Export the matching Age private key so SOPS can decrypt locally (for example <code>export SOPS_AGE_KEY_FILE=$HOME/.config/sops/age/keys.txt</code>).</li>
<li>Open the manifest with SOPS (<code>sops awx/sops-secrets/awx-admin.sops.yaml</code>, <code>sops data/postgres/sops-secrets/postgres-superuser.yaml</code>, or <code>sops apps/pihole/sops-secrets/admin-secret.yaml</code>). SOPS handles the decrypt/edit/re-encrypt cycle automatically when the editor closes.</li>
<li>Apply the updated manifest back to the cluster (<code>kubectl apply -f &lt;path-to-secret&gt;</code>).</li>
</ol>
<h4 id="rotate-awx-admin-credentials">Rotate AWX Admin Credentials<a class="headerlink" href="#rotate-awx-admin-credentials" title="Permanent link">&para;</a></h4>
<p>The AWX operator expects the <code>awx-admin</code> secret to exist before the instance comes online. When rotating the admin password, generate a new credential, update the <code>stringData.password</code> field in <code>awx/sops-secrets/awx-admin.sops.yaml</code>, apply the manifest, and then synchronize the running AWX instance:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>awx<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>deployment/awx-task<span class="w"> </span>--<span class="w"> </span>awx-manage<span class="w"> </span>changepassword<span class="w"> </span>admin<span class="w"> </span><span class="s1">&#39;&lt;new-password&gt;&#39;</span>
</code></pre></div>
<p>Bounce the AWX pods if the operator does not reconcile automatically.</p>
<h4 id="rotate-postgres-superuser-credentials">Rotate Postgres Superuser Credentials<a class="headerlink" href="#rotate-postgres-superuser-credentials" title="Permanent link">&para;</a></h4>
<p>The bootstrap Postgres chart consumes <code>data/postgres/sops-secrets/postgres-superuser.yaml</code> for the <code>pg-superuser</code> secret. When changing the password, ensure the <code>stringData.postgres-password</code> field and the <code>stringData.database-url</code> connection string stay in sync before applying the manifest.</p>
<h4 id="rotate-pi-hole-admin-password">Rotate Pi-hole Admin Password<a class="headerlink" href="#rotate-pi-hole-admin-password" title="Permanent link">&para;</a></h4>
<p>The Pi-hole Helm release references the SOPS-encrypted manifest at <code>apps/pihole/sops-secrets/admin-secret.yaml</code> to supply the <code>pihole-admin</code> Secret before the chart installs. To change the web UI password:</p>
<ol>
<li>Decrypt and edit the manifest:
   <div class="highlight"><pre><span></span><code>sops<span class="w"> </span>apps/pihole/sops-secrets/admin-secret.yaml
</code></pre></div></li>
<li>Replace the value under <code>stringData.password</code> with a new credential and save; SOPS will re-encrypt on exit.</li>
<li>Apply the updated secret and restart the release so the deployment consumes the new password:
   <div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>apps/pihole/sops-secrets/admin-secret.yaml
kubectl<span class="w"> </span>-n<span class="w"> </span>pihole<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>deployment/pihole
</code></pre></div></li>
</ol>
<h4 id="homepage-api-keys">Homepage API Keys<a class="headerlink" href="#homepage-api-keys" title="Permanent link">&para;</a></h4>
<p>The Homepage dashboard reads its widget credentials from <code>apps/homepage/sops-secrets/homepage-secrets.yaml</code>. The secret must define <code>openweathermap_api_key</code> for the weather widget and <code>uptime_kuma_api_key</code> for the Uptime Kuma status widget referenced in <code>k8s/apps/homepage/configmap.yaml</code>.</p>
<ol>
<li>Open the manifest with SOPS:
   <div class="highlight"><pre><span></span><code>sops<span class="w"> </span>apps/homepage/sops-secrets/homepage-secrets.yaml
</code></pre></div></li>
<li>Update the API keys under the <code>secrets.yaml</code> document.</li>
<li>Save and exit so SOPS re-encrypts the file, then commit the change or apply it manually (<code>kubectl apply -f apps/homepage/sops-secrets/homepage-secrets.yaml</code>).</li>
</ol>
<h4 id="manage-nextcloud-credentials">Manage Nextcloud Credentials<a class="headerlink" href="#manage-nextcloud-credentials" title="Permanent link">&para;</a></h4>
<p>Flux deploys Nextcloud with the Bitnami chart using three SOPS-encrypted secrets stored under <code>apps/nextcloud/sops-secrets/</code>:</p>
<ul>
<li><code>nextcloud-admin</code> maps to the Helm values <code>nextcloudUsername</code>, <code>nextcloudPassword</code>, and <code>nextcloudEmail</code> for the initial UI administrator account.【F:apps/nextcloud/sops-secrets/admin-secret.yaml†L1-L24】【F:k8s/apps/nextcloud/helmrelease.yaml†L55-L71】</li>
<li><code>nextcloud-redis</code> provides the external cache password consumed by <code>externalCache.password</code>.【F:apps/nextcloud/sops-secrets/redis-secret.yaml†L1-L18】【F:k8s/apps/nextcloud/helmrelease.yaml†L72-L76】</li>
<li><code>nextcloud-database</code> carries the PostgreSQL DSN plus discrete host, port, database, username, and password values that feed the chart's <code>externalDatabase</code> block and populate the <code>DATABASE_URL</code> environment variable exposed to the pod.【F:apps/nextcloud/sops-secrets/database-secret.yaml†L1-L24】【F:k8s/apps/nextcloud/helmrelease.yaml†L77-L104】</li>
</ul>
<p>Update the credentials by decrypting the manifests with <code>sops</code>, editing the <code>stringData</code> fields, and applying the files back to the cluster:</p>
<div class="highlight"><pre><span></span><code>sops<span class="w"> </span>apps/nextcloud/sops-secrets/admin-secret.yaml
sops<span class="w"> </span>apps/nextcloud/sops-secrets/redis-secret.yaml
sops<span class="w"> </span>apps/nextcloud/sops-secrets/database-secret.yaml
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>apps/nextcloud/sops-secrets/
</code></pre></div>
<p>Keep the <code>dsn</code> string synchronized with the individual host/port/username/password entries so the HelmRelease renders consistent values. Adjust the ingress host, TLS mapping, and upload limit in <code>k8s/apps/nextcloud/helmrelease.yaml</code> if your lab uses a different FQDN or quota than the defaults committed to Git.【F:k8s/apps/nextcloud/helmrelease.yaml†L25-L54】</p>
<h3 id="grafana-admin-credential-management">Grafana Admin Credential Management<a class="headerlink" href="#grafana-admin-credential-management" title="Permanent link">&para;</a></h3>
<p>Grafana is deployed through the <code>kube-prometheus-stack</code> chart. The admin credentials are stored in the SOPS-encrypted manifest at <code>observability/sops-secrets/grafana-admin.yaml</code>.</p>
<h4 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h4>
<ol>
<li>Install <a href="https://github.com/getsops/sops">SOPS</a> on your workstation.</li>
<li>Import the <strong>Homelab SOPS</strong> GPG key (<code>06D8D7726588CB103AE9717413BF4A9EA7B7C3F8</code>) from the team credential vault into your local keyring. This key is <strong>not</strong> stored in the repository; request access through the normal secure channel if it is not already present.</li>
</ol>
<h4 id="retrieve-the-password">Retrieve the Password<a class="headerlink" href="#retrieve-the-password" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Decrypt the manifest and print the admin credentials</span>
sops<span class="w"> </span>-d<span class="w"> </span>observability/sops-secrets/grafana-admin.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>yq<span class="w"> </span><span class="s1">&#39;.stringData[&quot;admin-user&quot;] + &quot;:&quot; + .stringData[&quot;admin-password&quot;]&#39;</span><span class="w"> </span>-r
</code></pre></div>
<h4 id="rotate-the-password">Rotate the Password<a class="headerlink" href="#rotate-the-password" title="Permanent link">&para;</a></h4>
<ol>
<li>Open the manifest with <code>sops</code>:
   <div class="highlight"><pre><span></span><code>sops<span class="w"> </span>observability/sops-secrets/grafana-admin.yaml
</code></pre></div></li>
<li>Replace the value under <code>stringData.admin-password</code> with a new random password. The helper below generates a 32-character value:
   <div class="highlight"><pre><span></span><code>python<span class="w"> </span>-<span class="w"> </span><span class="s">&lt;&lt;&#39;PY&#39;</span>
<span class="s">import secrets, string</span>
<span class="s">alphabet = string.ascii_letters + string.digits + &#39;!@#$%^&amp;*()-_=+&#39;</span>
<span class="s">print(&#39;&#39;.join(secrets.choice(alphabet) for _ in range(32)))</span>
<span class="s">PY</span>
</code></pre></div></li>
<li>Save and exit; <code>sops</code> will re-encrypt the document automatically.</li>
<li>Commit the updated secret and let Flux reconcile, or apply it manually if you need the change immediately:
   <div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>observability/sops-secrets/grafana-admin.yaml
</code></pre></div></li>
</ol>
<h4 id="why-this-matters">Why This Matters<a class="headerlink" href="#why-this-matters" title="Permanent link">&para;</a></h4>
<p>The chart values file (<code>observability/kps-values.yaml</code>) points Grafana at the <code>grafana-admin</code> Secret via <code>grafana.admin.existingSecret</code>. This keeps credentials out of Git history while still allowing GitOps workflows to manage the rendered Secret manifest.</p>
<h3 id="internal-ca">Internal CA<a class="headerlink" href="#internal-ca" title="Permanent link">&para;</a></h3>
<p>Export the root CA to trust on clients:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>cert-manager<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>labz-root-ca-secret<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.ca\.crt}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d<span class="w"> </span>&gt;<span class="w"> </span>labz-root-ca.crt
</code></pre></div>
<h2 id="pfsense-and-networking">pfSense and Networking<a class="headerlink" href="#pfsense-and-networking" title="Permanent link">&para;</a></h2>
<h3 id="refreshing-pfsense-bootstrap-media">Refreshing pfSense Bootstrap Media<a class="headerlink" href="#refreshing-pfsense-bootstrap-media" title="Permanent link">&para;</a></h3>
<p>pfSense reads configuration overrides from the secondary CD-ROM labelled <code>pfSense_config</code> during its first boot. The ISO lives at <code>${WORK_ROOT}/pfsense/config/pfSense-config.iso</code> (defaults to <code>/opt/homelab/pfsense/config/pfSense-config.iso</code>). When lab addressing or credentials change, regenerate and reattach the media before starting the VM:</p>
<div class="highlight"><pre><span></span><code>./pfsense/pf-config-gen.sh<span class="w">   </span><span class="c1"># rebuild config.xml and the pfSense_config ISO (requires genisoimage or mkisofs)</span>
virsh<span class="w"> </span>shutdown<span class="w"> </span><span class="si">${</span><span class="nv">VM_NAME</span><span class="si">}</span><span class="w">    </span><span class="c1"># skip if the VM has never been started</span>
sudo<span class="w"> </span>./scripts/pf-ztp.sh<span class="w"> </span>--env-file<span class="w"> </span>./.env
</code></pre></div>
<p><code>pf-ztp.sh</code> swaps both the installer disk and config ISO, inserting media live when possible. If the VM is running and libvirt refuses a hot change, stop it first or run <code>virsh change-media ${VM_NAME} sdy ${WORK_ROOT}/pfsense/config/pfSense-config.iso --insert --force --config</code> manually after the shutdown completes. The helper re-reads <code>.env</code> on each invocation, so confirm <code>PF_INSTALLER_SRC</code> still references the installer download before triggering a refresh. Legacy <code>PF_SERIAL_INSTALLER_PATH</code>/<code>PF_ISO_PATH</code> entries are still honored when present (<code>PF_ISO_PATH</code> remains the VGA build toggle).</p>
<h3 id="enabling-nat-examples">Enabling NAT Examples<a class="headerlink" href="#enabling-nat-examples" title="Permanent link">&para;</a></h3>
<p>pfSense GUI → <strong>Firewall</strong> → <strong>NAT</strong> → <strong>Port Forward</strong> → edit example → uncheck <strong>Disable</strong> → <strong>Save</strong> → <strong>Apply</strong>. Then navigate to <strong>Firewall</strong> → <strong>Rules</strong> → <strong>WAN</strong> → enable the matching pass rule if present.</p>
<h2 id="configuration-reference">Configuration Reference<a class="headerlink" href="#configuration-reference" title="Permanent link">&para;</a></h2>
<h3 id="environment-variables-and-mapping">Environment Variables and Mapping<a class="headerlink" href="#environment-variables-and-mapping" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Existing var</th>
<th>Canonical var</th>
<th>Used by</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LAB_DOMAIN_BASE</code></td>
<td><code>LABZ_DOMAIN</code></td>
<td>Ingress/hosts</td>
</tr>
<tr>
<td><code>LAB_CLUSTER_SUB</code></td>
<td>(keep as-is)</td>
<td>Cluster FQDNs (misc)</td>
</tr>
<tr>
<td><code>METALLB_POOL_START/END</code></td>
<td><code>LABZ_METALLB_RANGE</code></td>
<td>MetalLB AddressPool</td>
</tr>
<tr>
<td><code>TRAEFIK_LOCAL_IP</code></td>
<td>(derive from VIP)</td>
<td>Docs only</td>
</tr>
<tr>
<td><code>PG_BACKUP_HOSTPATH</code></td>
<td><code>LABZ_MOUNT_BACKUPS</code></td>
<td>Backups</td>
</tr>
<tr>
<td><code>/srv/*</code> mounts</td>
<td><code>LABZ_MOUNT_*</code></td>
<td>hostPath PVs</td>
</tr>
</tbody>
</table>
<h4 id="jellyfin-configuration">Jellyfin configuration<a class="headerlink" href="#jellyfin-configuration" title="Permanent link">&para;</a></h4>
<p>The Jellyfin overlay sources runtime values from the <code>jellyfin-config</code> ConfigMap and the SOPS-managed <code>jellyfin-api</code> Secret. Update <code>k8s/apps/jellyfin/configmap.yaml</code> when the timezone, published URL, or media mount path change, and edit <code>k8s/apps/jellyfin/sops-secrets/jellyfin-api.yaml</code> with the Age key to rotate the API token exposed as <code>JELLYFIN_API_KEY</code> in the deployment.【F:k8s/apps/jellyfin/configmap.yaml†L1-L9】【F:k8s/apps/jellyfin/sops-secrets/jellyfin-api.yaml†L1-L29】【F:k8s/apps/jellyfin/deployment.yaml†L1-L42】</p>
<p>After updating the MetalLB fields in <code>.env</code>, regenerate the Flux manifest so the GitOps path and bootstrap helpers agree on the pool range:</p>
<div class="highlight"><pre><span></span><code>./scripts/render_metallb_pool_manifest.sh<span class="w"> </span>--env-file<span class="w"> </span>./.env
</code></pre></div>
<h3 id="traefik-dashboard">Traefik Dashboard<a class="headerlink" href="#traefik-dashboard" title="Permanent link">&para;</a></h3>
<p>The Traefik dashboard is published at <a href="https://traefik.labz.home.arpa/dashboard/">https://traefik.labz.home.arpa/dashboard/</a> behind the <code>websecure</code> entry point. The route terminates TLS with the <code>traefik-dashboard-tls</code> certificate issued by <code>labz-ca-issuer</code>, so install the internal root CA on any workstation before browsing.</p>
<p>Basic authentication protects the dashboard. Use the following credentials when prompted:</p>
<table>
<thead>
<tr>
<th>Username</th>
<th>Password</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ops</code></td>
<td><code>xOps!Traefik2024</code></td>
</tr>
</tbody>
</table>
<h2 id="backup-disaster-recovery">Backup &amp; Disaster Recovery<a class="headerlink" href="#backup-disaster-recovery" title="Permanent link">&para;</a></h2>
<ul>
<li>PostgreSQL backups are scheduled by the CronJob in <code>data/postgres/backup-cron.yaml</code>.</li>
<li>HostPath directories are prepared during the Kubernetes bootstrap helper (<code>scripts/k8s-up.sh</code>), which ensures application data paths exist before workloads deploy.【F:scripts/k8s-up.sh†L625-L704】</li>
<li>To restore, re-run the bootstrap scripts (<code>make up</code>) and re-apply the saved secrets using Flux or manual <code>kubectl</code> commands.</li>
</ul>
<h2 id="extending-the-platform">Extending the Platform<a class="headerlink" href="#extending-the-platform" title="Permanent link">&para;</a></h2>
<ul>
<li>Add new apps by creating namespaces in <code>apps/</code> and referencing them inside the main <code>Makefile</code> or Flux <code>kustomizations</code>.</li>
<li>Leverage the documentation pipeline described in <a href="../workflow/">Workflow</a> to record decisions, diagrams, and operational runbooks.</li>
<li>Use the GitHub Pages deployment to surface the latest diagrams and Markdown whenever changes merge into <code>main</code>.</li>
</ul>
<h2 id="changelog">Changelog<a class="headerlink" href="#changelog" title="Permanent link">&para;</a></h2>
<h3 id="2025-09-20t000000000000z">2025-09-20T00:00:00.000000Z<a class="headerlink" href="#2025-09-20t000000000000z" title="Permanent link">&para;</a></h3>
<ul>
<li>Extended the GitOps CI workflow with a cached lint job that runs ShellCheck, yamllint, and kubeconform before manifest validation.</li>
<li>Documented how to invoke the lint suite locally via <code>make fmt</code>/<code>pre-commit run --all-files</code> so contributors can mirror the CI checks.</li>
</ul>
<h3 id="2025-09-19t000000000000z">2025-09-19T00:00:00.000000Z<a class="headerlink" href="#2025-09-19t000000000000z" title="Permanent link">&para;</a></h3>
<ul>
<li>Documented a host-only WireGuard workflow in the README, including package installation, key management, sample <code>wg0.conf</code>, router/VPS considerations, client configuration, and verification guidance for the <code>192.168.88.0/24</code> overlay.</li>
<li>Linked troubleshooting content to the new remote access guidance so runbooks point operators at the same procedure.</li>
</ul>
<h3 id="2025-09-18t000000000000z">2025-09-18T00:00:00.000000Z<a class="headerlink" href="#2025-09-18t000000000000z" title="Permanent link">&para;</a></h3>
<ul>
<li>Recorded current release cadence and pinned the GitOps stack to the n-1 builds exercised in testing: Kubernetes v1.31.3, MetalLB 0.14.7, Traefik 27.0.2, cert-manager 1.16.3, Bitnami PostgreSQL 16.2.6, kube-prometheus-stack 65.5.0, and AWX operator 2.20.0.</li>
<li>Updated the Flux CLI bootstrap helper to install v2.3.0 so local environments reconcile with the same binary verified in automation.</li>
<li>Refreshed documentation to note the latest upstream versions alongside the pinned releases for easier future upgrades.</li>
</ul>
<h3 id="2025-09-17t080000000000z">2025-09-17T08:00:00.000000Z<a class="headerlink" href="#2025-09-17t080000000000z" title="Permanent link">&para;</a></h3>
<ul>
<li>Pin Flux-managed chart versions to the builds exercised in automation: MetalLB 0.14.5, cert-manager 1.15.3, and Traefik 26.0.0.</li>
<li>Document the Helm chart upgrade workflow (bump <code>k8s/addons/*/release.yaml</code>, stage with <code>make k8s.bootstrap</code>, then update docs) to keep production in lockstep with staging.【F:Makefile†L46-L58】</li>
<li>Wire Flux <code>dependsOn</code> for Traefik so upgrades wait on MetalLB and cert-manager health, surfacing dependency issues earlier.</li>
</ul>
<h3 id="2025-09-10t044738065634z">2025-09-10T04:47:38.065634Z<a class="headerlink" href="#2025-09-10t044738065634z" title="Permanent link">&para;</a></h3>
<ul>
<li>Restructured repo to modular stages (Makefile).</li>
<li>Added <code>bootstrap.sh</code> with br0 default + safe reboot/resume.</li>
<li>pfSense CE 2.8.0 ISO URL; config.xml generator with labz domain + NAT examples (disabled).</li>
<li>Minikube + MetalLB + Traefik + cert-manager internal CA.</li>
<li>Postgres with 7-day nightly backups to hostPath.</li>
<li>AWX (small), kube-prometheus-stack, Django multiproject app.</li>
<li>Flux controllers installed (no remote Git).</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../troubleshooting/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Troubleshooting">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Troubleshooting
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © {year} devadalberto
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.footer", "content.code.copy", "content.action.edit", "toc.integrate"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>